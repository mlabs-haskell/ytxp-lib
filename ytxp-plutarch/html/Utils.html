<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Utils</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ytxp-plutarch-0.1.0: Control scripts, types, and utilities for the YTxP architecture</span><ul class="links" id="page-menu"><li><a href="src/Utils.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Utils</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:pmintFieldHasTokenOfCurrencySymbolTokenNameAndAmount">pmintFieldHasTokenOfCurrencySymbolTokenNameAndAmount</a> :: <span class="keyword">forall</span> (keys :: KeyGuarantees) (amounts :: AmountGuarantees) (s :: S). Term s (PValue keys amounts :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; (PInteger :--&gt; PBool))))</li><li class="src short"><a href="#v:phasOneScriptInputAtValidatorWithExactlyOneToken">phasOneScriptInputAtValidatorWithExactlyOneToken</a> :: Term s (PBuiltinList PTxInInfo) -&gt; Term s (PCurrencySymbol :--&gt; (PTxOutRef :--&gt; PBool))</li><li class="src short"><a href="#v:phasOnlyOneValidScriptOutputWithToken">phasOnlyOneValidScriptOutputWithToken</a> :: <a href="../../ghc-9.6.5/html/libraries/base-4.18.2.1/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a> -&gt; Term s (PBuiltinList PTxOut) -&gt; Term s (PCurrencySymbol :--&gt; PBool)</li><li class="src short"><a href="#v:phasOnlyOneInputWithExactlyOneTokenWithSymbol">phasOnlyOneInputWithExactlyOneTokenWithSymbol</a> :: Term s (PBuiltinList PTxInInfo) -&gt; Term s (PCurrencySymbol :--&gt; PBool)</li><li class="src short"><a href="#v:phasNoScriptInputWithToken">phasNoScriptInputWithToken</a> :: Term s (PBuiltinList PTxInInfo) -&gt; Term s (PCurrencySymbol :--&gt; PBool)</li><li class="src short"><a href="#v:poutputsDoNotContainToken">poutputsDoNotContainToken</a> :: Term s (PBuiltinList PTxOut) -&gt; Term s (PCurrencySymbol :--&gt; PBool)</li><li class="src short"><a href="#v:pemptyTokenName">pemptyTokenName</a> :: Term s PTokenName</li><li class="src short"><a href="#v:pands">pands</a> :: [Term s PBool] -&gt; Term s PBool</li><li class="src short"><a href="#v:pscriptHashToCurrencySymbol">pscriptHashToCurrencySymbol</a> :: Term s PScriptHash -&gt; Term s PCurrencySymbol</li><li class="src short"><a href="#v:punsafeFromInlineDatum">punsafeFromInlineDatum</a> :: <span class="keyword">forall</span> (s :: S) (a :: S -&gt; <a href="../../ghc-9.6.5/html/libraries/base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). Term s (POutputDatum :--&gt; a)</li><li class="src short"><a href="#v:pmember">pmember</a> :: PIsData k =&gt; Term s (k :--&gt; (PMap any k v :--&gt; PBool))</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:pmintFieldHasTokenOfCurrencySymbolTokenNameAndAmount" class="def">pmintFieldHasTokenOfCurrencySymbolTokenNameAndAmount</a> :: <span class="keyword">forall</span> (keys :: KeyGuarantees) (amounts :: AmountGuarantees) (s :: S). Term s (PValue keys amounts :--&gt; (PCurrencySymbol :--&gt; (PTokenName :--&gt; (PInteger :--&gt; PBool)))) <a href="src/Utils.html#pmintFieldHasTokenOfCurrencySymbolTokenNameAndAmount" class="link">Source</a> <a href="#v:pmintFieldHasTokenOfCurrencySymbolTokenNameAndAmount" class="selflink">#</a></p><div class="doc"><p>Check that there is only token of given <code>PCurrencySymbol</code>
 and <code>PTokenName</code> with given amount contained in the given PValue.</p><p>Note: We use this function when checking the <code>mint</code> field of <code>TxInfo</code>,
 as when checking <code>mint</code> we need to check that the length is equal to two
 to account for the additional 'zero Ada' entry automatically included in the <code>mint</code> field:
   (PCurrencySymbol 0x,PMap [(PTokenName 0x,0)])])</p></div></div><div class="top"><p class="src"><a id="v:phasOneScriptInputAtValidatorWithExactlyOneToken" class="def">phasOneScriptInputAtValidatorWithExactlyOneToken</a> :: Term s (PBuiltinList PTxInInfo) -&gt; Term s (PCurrencySymbol :--&gt; (PTxOutRef :--&gt; PBool)) <a href="src/Utils.html#phasOneScriptInputAtValidatorWithExactlyOneToken" class="link">Source</a> <a href="#v:phasOneScriptInputAtValidatorWithExactlyOneToken" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:phasOnlyOneValidScriptOutputWithToken" class="def">phasOnlyOneValidScriptOutputWithToken</a> :: <a href="../../ghc-9.6.5/html/libraries/base-4.18.2.1/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a> -&gt; Term s (PBuiltinList PTxOut) -&gt; Term s (PCurrencySymbol :--&gt; PBool) <a href="src/Utils.html#phasOnlyOneValidScriptOutputWithToken" class="link">Source</a> <a href="#v:phasOnlyOneValidScriptOutputWithToken" class="selflink">#</a></p><div class="doc"><p>Check that:
  - there is exactly one script output with exactly one token
    with the given <code>PCurrencySymbol</code> and <code>PTokenName</code>
  - there is no other script output with one or more of these tokens
    (We do this in order to use this helper to ensure that there are no other
     script outputs containing one ore more of this token)
  - there is no wallet output that contains one of these tokens
  - if there is exactly one script output with exactly one of these tokens,
    we check that it contains no other tokens aside from Ada
  - finally check that the output also contains a valid (according to the spec) <code>POutputDatum</code>,
    ensuring the length of the yield list does not exceed the provided <code>maxYieldListSize</code> parameter.</p></div></div><div class="top"><p class="src"><a id="v:phasOnlyOneInputWithExactlyOneTokenWithSymbol" class="def">phasOnlyOneInputWithExactlyOneTokenWithSymbol</a> :: Term s (PBuiltinList PTxInInfo) -&gt; Term s (PCurrencySymbol :--&gt; PBool) <a href="src/Utils.html#phasOnlyOneInputWithExactlyOneTokenWithSymbol" class="link">Source</a> <a href="#v:phasOnlyOneInputWithExactlyOneTokenWithSymbol" class="selflink">#</a></p><div class="doc"><p>Check that there is exactly one input,
and that one input carries exactly one yield list token.</p></div></div><div class="top"><p class="src"><a id="v:phasNoScriptInputWithToken" class="def">phasNoScriptInputWithToken</a> :: Term s (PBuiltinList PTxInInfo) -&gt; Term s (PCurrencySymbol :--&gt; PBool) <a href="src/Utils.html#phasNoScriptInputWithToken" class="link">Source</a> <a href="#v:phasNoScriptInputWithToken" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:poutputsDoNotContainToken" class="def">poutputsDoNotContainToken</a> :: Term s (PBuiltinList PTxOut) -&gt; Term s (PCurrencySymbol :--&gt; PBool) <a href="src/Utils.html#poutputsDoNotContainToken" class="link">Source</a> <a href="#v:poutputsDoNotContainToken" class="selflink">#</a></p><div class="doc"><p>Check that none of the given outputs contain a token
with the given <code>PCurrencySymbol</code></p></div></div><div class="top"><p class="src"><a id="v:pemptyTokenName" class="def">pemptyTokenName</a> :: Term s PTokenName <a href="src/Utils.html#pemptyTokenName" class="link">Source</a> <a href="#v:pemptyTokenName" class="selflink">#</a></p><div class="doc"><p>Empty token name</p></div></div><div class="top"><p class="src"><a id="v:pands" class="def">pands</a> :: [Term s PBool] -&gt; Term s PBool <a href="src/Utils.html#pands" class="link">Source</a> <a href="#v:pands" class="selflink">#</a></p><div class="doc"><p>Like Haskell's <code><a href="../../ghc-9.6.5/html/libraries/base-4.18.2.1/Data-Foldable.html#v:and" title="Data.Foldable">and</a></code> but for Plutarch terms
<code><a href="Plutarch.html#v:Bool" title="Plutarch">Bool</a></code> has the same function but does not export it.</p></div></div><div class="top"><p class="src"><a id="v:pscriptHashToCurrencySymbol" class="def">pscriptHashToCurrencySymbol</a> :: Term s PScriptHash -&gt; Term s PCurrencySymbol <a href="src/Utils.html#pscriptHashToCurrencySymbol" class="link">Source</a> <a href="#v:pscriptHashToCurrencySymbol" class="selflink">#</a></p><div class="doc"><p>Convert a <code>ScriptHash</code> to a <code>CurrencySymbol</code>, which has the same representation</p></div></div><div class="top"><p class="src"><a id="v:punsafeFromInlineDatum" class="def">punsafeFromInlineDatum</a> :: <span class="keyword">forall</span> (s :: S) (a :: S -&gt; <a href="../../ghc-9.6.5/html/libraries/base-4.18.2.1/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). Term s (POutputDatum :--&gt; a) <a href="src/Utils.html#punsafeFromInlineDatum" class="link">Source</a> <a href="#v:punsafeFromInlineDatum" class="selflink">#</a></p><div class="doc"><p>Extract the datum from a <code>POutputDatum</code>, expecting it to be an inline datum.</p></div></div><div class="top"><p class="src"><a id="v:pmember" class="def">pmember</a> :: PIsData k =&gt; Term s (k :--&gt; (PMap any k v :--&gt; PBool)) <a href="src/Utils.html#pmember" class="link">Source</a> <a href="#v:pmember" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>